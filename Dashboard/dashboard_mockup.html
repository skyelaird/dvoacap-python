<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VE1ATM HF Propagation Dashboard - MOCKUP</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 15px 20px;
            border-bottom: 3px solid #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 12px;
            color: #3498db;
        }

        .header h1::before {
            content: 'ðŸ“¡ ';
        }

        /* Control Panel */
        .control-panel {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .control-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .control-group label.group-label {
            font-weight: 600;
            color: #3498db;
            margin-right: 5px;
            font-size: 14px;
        }

        .control-group input[type="radio"] {
            display: none;
        }

        .control-group label.radio-label {
            padding: 6px 14px;
            background-color: #2c3e50;
            border: 2px solid #34495e;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 13px;
            font-weight: 500;
        }

        .control-group label.radio-label:hover {
            background-color: #34495e;
            border-color: #3498db;
        }

        .control-group input[type="radio"]:checked + label.radio-label {
            background-color: #3498db;
            border-color: #3498db;
            color: #fff;
            font-weight: 600;
        }

        /* Map Layer Toggle */
        .layer-toggle {
            margin-left: auto;
            display: flex;
            gap: 8px;
        }

        .layer-toggle label.group-label {
            color: #95a5a6;
            font-size: 13px;
        }

        /* Main Layout */
        .main-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 140px);
        }

        /* Map Container */
        #map {
            flex: 1;
            background-color: #1a1a1a;
        }

        /* Quick Summary Bar */
        .quick-summary {
            background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%);
            padding: 12px 20px;
            border-top: 2px solid #3498db;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .quick-summary .emoji {
            font-size: 18px;
        }

        .quick-summary .label {
            color: #95a5a6;
            font-weight: 600;
            margin-right: 8px;
        }

        .quick-summary .value {
            color: #3498db;
            font-weight: 600;
        }

        .quick-summary .best-opportunity {
            color: #2ecc71;
            font-weight: 700;
        }

        .quick-summary .dxcc-opportunity {
            color: #e74c3c;
            font-weight: 700;
        }

        .quick-summary .next-change {
            color: #f39c12;
        }

        /* Tooltips */
        .leaflet-tooltip {
            background-color: rgba(44, 62, 80, 0.95) !important;
            border: 2px solid #3498db !important;
            border-radius: 6px !important;
            color: #e0e0e0 !important;
            font-size: 13px !important;
            padding: 8px 12px !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
        }

        .leaflet-tooltip-top:before,
        .leaflet-tooltip-bottom:before,
        .leaflet-tooltip-left:before,
        .leaflet-tooltip-right:before {
            border-top-color: #3498db !important;
        }

        /* DXCC Pin Popup */
        .leaflet-popup-content-wrapper {
            background-color: #2c3e50 !important;
            color: #e0e0e0 !important;
            border-radius: 8px !important;
            box-shadow: 0 4px 16px rgba(0,0,0,0.5) !important;
        }

        .leaflet-popup-content {
            margin: 12px !important;
            font-size: 13px !important;
        }

        .popup-entity-name {
            font-size: 16px;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 8px;
        }

        .popup-status {
            margin-bottom: 6px;
        }

        .popup-status.needed {
            color: #e74c3c;
        }

        .popup-status.worked {
            color: #f39c12;
        }

        .popup-propagation {
            background-color: #1a252f;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .popup-propagation strong {
            color: #2ecc71;
        }

        /* Legend */
        .legend {
            position: absolute;
            bottom: 70px;
            right: 20px;
            background-color: rgba(44, 62, 80, 0.95);
            padding: 12px 16px;
            border-radius: 8px;
            border: 2px solid #3498db;
            z-index: 1000;
            font-size: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }

        .legend h4 {
            margin-bottom: 8px;
            color: #3498db;
            font-size: 14px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
            border: 1px solid #555;
        }

        .legend-separator {
            margin: 10px 0;
            border-top: 1px solid #555;
        }

        /* MOCKUP Watermark */
        .mockup-watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 80px;
            font-weight: 900;
            color: rgba(255, 255, 255, 0.08);
            z-index: 500;
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>VE1ATM HF Propagation Monitor</h1>

        <div class="control-panel">
            <!-- Band Selection -->
            <div class="control-group">
                <label class="group-label">Band:</label>
                <input type="radio" id="band-40m" name="band" value="40m">
                <label for="band-40m" class="radio-label">40m</label>

                <input type="radio" id="band-30m" name="band" value="30m">
                <label for="band-30m" class="radio-label">30m</label>

                <input type="radio" id="band-20m" name="band" value="20m" checked>
                <label for="band-20m" class="radio-label">20m</label>

                <input type="radio" id="band-17m" name="band" value="17m">
                <label for="band-17m" class="radio-label">17m</label>

                <input type="radio" id="band-15m" name="band" value="15m">
                <label for="band-15m" class="radio-label">15m</label>

                <input type="radio" id="band-12m" name="band" value="12m">
                <label for="band-12m" class="radio-label">12m</label>

                <input type="radio" id="band-10m" name="band" value="10m">
                <label for="band-10m" class="radio-label">10m</label>
            </div>

            <!-- Mode Selection -->
            <div class="control-group">
                <label class="group-label">Mode:</label>
                <input type="radio" id="mode-ft8" name="mode" value="FT8" checked>
                <label for="mode-ft8" class="radio-label">FT8/Digital</label>

                <input type="radio" id="mode-ssb" name="mode" value="SSB">
                <label for="mode-ssb" class="radio-label">SSB</label>

                <input type="radio" id="mode-cw" name="mode" value="CW">
                <label for="mode-cw" class="radio-label">CW</label>
            </div>

            <!-- Time Selection -->
            <div class="control-group">
                <label class="group-label">Time:</label>
                <input type="radio" id="time-now" name="time" value="now" checked>
                <label for="time-now" class="radio-label">Now</label>

                <input type="radio" id="time-3h" name="time" value="3h">
                <label for="time-3h" class="radio-label">+3h</label>

                <input type="radio" id="time-6h" name="time" value="6h">
                <label for="time-6h" class="radio-label">+6h</label>

                <input type="radio" id="time-12h" name="time" value="12h">
                <label for="time-12h" class="radio-label">+12h</label>

                <input type="radio" id="time-24h" name="time" value="24h">
                <label for="time-24h" class="radio-label">+24h</label>

                <input type="radio" id="time-48h" name="time" value="48h">
                <label for="time-48h" class="radio-label">+48h</label>

                <input type="radio" id="time-72h" name="time" value="72h">
                <label for="time-72h" class="radio-label">+72h</label>
            </div>

            <!-- Map Layer Toggle -->
            <div class="layer-toggle">
                <label class="group-label">Layer:</label>
                <input type="radio" id="layer-signal" name="layer" value="signal" checked>
                <label for="layer-signal" class="radio-label">Signal Strength</label>

                <input type="radio" id="layer-reliability" name="layer" value="reliability">
                <label for="layer-reliability" class="radio-label">Reliability %</label>

                <input type="radio" id="layer-snr" name="layer" value="snr">
                <label for="layer-snr" class="radio-label">SNR</label>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div id="map"></div>
        <div class="mockup-watermark">PROTOTYPE</div>

        <!-- Legend -->
        <div class="legend">
            <h4>Propagation Status</h4>
            <div class="legend-item">
                <div class="legend-color" style="background-color: rgba(46, 204, 113, 0.6);"></div>
                <span>GOOD (Strong)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: rgba(241, 196, 15, 0.6);"></div>
                <span>FAIR (Moderate)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: rgba(231, 76, 60, 0.6);"></div>
                <span>POOR (Weak)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: rgba(127, 140, 141, 0.4);"></div>
                <span>CLOSED</span>
            </div>

            <div class="legend-separator"></div>
            <h4 style="margin-top: 8px;">DXCC Entities</h4>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e74c3c; border-radius: 50%;"></div>
                <span>Needed + Open</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #95a5a6; border-radius: 50%;"></div>
                <span>Needed + Closed</span>
            </div>
        </div>
    </div>

    <div class="quick-summary">
        <div>
            <span class="emoji">ðŸŽ¯</span>
            <span class="label">RIGHT NOW (0045 UTC)</span>
        </div>
        <div>
            <span class="label">BEST:</span>
            <span class="best-opportunity">20m to JA: S9+20 (FT8)</span>
        </div>
        <div>
            <span class="label">DXCC:</span>
            <span class="dxcc-opportunity">VP8 (Falklands) - 20m S9</span>
        </div>
        <div>
            <span class="label">NEXT:</span>
            <span class="next-change">40mâ†’EU opens 0200 UTC</span>
        </div>
        <div style="margin-left: auto; font-size: 11px; color: #7f8c8d;">
            Hover over regions/pins for details
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // Initialize map
        const map = L.map('map', {
            center: [20, 0],
            zoom: 2,
            minZoom: 2,
            maxZoom: 8,
            worldCopyJump: false
        });

        // Dark tile layer
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Home station marker
        const homeMarker = L.marker([44.651070, -63.582687], {
            icon: L.divIcon({
                className: 'home-marker',
                html: '<div style="background-color: #3498db; width: 16px; height: 16px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.5);"></div>',
                iconSize: [16, 16],
                iconAnchor: [8, 8]
            })
        }).addTo(map);
        homeMarker.bindTooltip('<strong>VE1ATM</strong><br>Home Station<br>Halifax, NS', {
            permanent: false,
            direction: 'top'
        });

        // Define region polygons with propagation status
        const regions = {
            'EU': {
                name: 'Europe',
                coords: [
                    [71.0, -10.0],
                    [71.0, 40.0],
                    [36.0, 40.0],
                    [36.0, -10.0]
                ],
                status: 'GOOD',
                snr: 15,
                signal: 'S9+10',
                reliability: 85
            },
            'AS': {
                name: 'Asia',
                coords: [
                    [70.0, 40.0],
                    [70.0, 150.0],
                    [10.0, 150.0],
                    [10.0, 40.0]
                ],
                status: 'GOOD',
                snr: 18,
                signal: 'S9+15',
                reliability: 90
            },
            'JA': {
                name: 'Japan',
                coords: [
                    [46.0, 128.0],
                    [46.0, 146.0],
                    [30.0, 146.0],
                    [30.0, 128.0]
                ],
                status: 'EXCELLENT',
                snr: 22,
                signal: 'S9+20',
                reliability: 95
            },
            'SA': {
                name: 'South America',
                coords: [
                    [12.0, -82.0],
                    [12.0, -34.0],
                    [-56.0, -34.0],
                    [-56.0, -82.0]
                ],
                status: 'FAIR',
                snr: 8,
                signal: 'S7',
                reliability: 65
            },
            'AF': {
                name: 'Africa',
                coords: [
                    [37.0, -17.0],
                    [37.0, 51.0],
                    [-35.0, 51.0],
                    [-35.0, 17.0]
                ],
                status: 'POOR',
                snr: 3,
                signal: 'S3',
                reliability: 40
            },
            'OC': {
                name: 'Oceania',
                coords: [
                    [10.0, 110.0],
                    [10.0, 180.0],
                    [-50.0, 180.0],
                    [-50.0, 110.0]
                ],
                status: 'CLOSED',
                snr: -5,
                signal: 'S0',
                reliability: 15
            }
        };

        // Color mapping
        const statusColors = {
            'EXCELLENT': 'rgba(46, 204, 113, 0.6)',  // Bright green
            'GOOD': 'rgba(46, 204, 113, 0.5)',       // Green
            'FAIR': 'rgba(241, 196, 15, 0.6)',        // Yellow
            'POOR': 'rgba(231, 76, 60, 0.6)',         // Red
            'CLOSED': 'rgba(127, 140, 141, 0.4)'      // Gray
        };

        // Draw region polygons
        Object.keys(regions).forEach(regionCode => {
            const region = regions[regionCode];
            const polygon = L.polygon(region.coords, {
                color: statusColors[region.status].replace('0.6', '1').replace('0.5', '1').replace('0.4', '1'),
                fillColor: statusColors[region.status],
                fillOpacity: 0.6,
                weight: 2
            }).addTo(map);

            // Tooltip on hover
            polygon.bindTooltip(
                `<strong>${region.name}</strong><br>` +
                `20m FT8: <strong>${region.status}</strong><br>` +
                `Signal: ${region.signal}<br>` +
                `SNR: ${region.snr > 0 ? '+' : ''}${region.snr} dB<br>` +
                `Reliability: ${region.reliability}%`,
                { sticky: true }
            );
        });

        // DXCC Entity pins (examples)
        const dxccEntities = [
            {
                name: 'VP8 (Falkland Islands)',
                coords: [-51.7, -59.5],
                status: 'needed-open',
                signal: 'S9',
                band: '20m'
            },
            {
                name: '3B8 (Mauritius)',
                coords: [-20.3, 57.6],
                status: 'needed-closed',
                signal: 'S0',
                band: '-'
            },
            {
                name: 'JA (Japan)',
                coords: [36.2, 138.2],
                status: 'needed-open',
                signal: 'S9+20',
                band: '20m'
            },
            {
                name: 'ZL (New Zealand)',
                coords: [-40.9, 174.9],
                status: 'needed-closed',
                signal: 'S0',
                band: '-'
            },
            {
                name: 'EA8 (Canary Islands)',
                coords: [28.3, -16.5],
                status: 'needed-open',
                signal: 'S7',
                band: '20m'
            }
        ];

        dxccEntities.forEach(entity => {
            const pinColor = entity.status === 'needed-open' ? '#e74c3c' : '#95a5a6';
            const marker = L.circleMarker(entity.coords, {
                radius: 8,
                fillColor: pinColor,
                color: '#fff',
                weight: 2,
                fillOpacity: 0.9
            }).addTo(map);

            // Popup on click
            const popupContent = `
                <div class="popup-entity-name">${entity.name}</div>
                <div class="popup-status ${entity.status === 'needed-open' ? 'needed' : 'worked'}">
                    Status: <strong>${entity.status === 'needed-open' ? 'NEEDED (Open Now)' : 'NEEDED (Closed)'}</strong>
                </div>
                <div class="popup-propagation">
                    Current: <strong>${entity.band}</strong> at <strong>${entity.signal}</strong><br>
                    Distance: 8,420 km | Bearing: 045Â°
                </div>
            `;
            marker.bindPopup(popupContent);

            // Tooltip on hover
            marker.bindTooltip(
                `<strong>${entity.name}</strong><br>${entity.band} ${entity.signal}`,
                { direction: 'top' }
            );
        });

        // Add greyline (simple day/night terminator simulation)
        const now = new Date();
        const utcHour = now.getUTCHours() + now.getUTCMinutes() / 60;
        const sunLon = ((utcHour - 12) * 15) % 360;

        // Simplified greyline (just showing concept)
        const greylineCircle = L.circle([0, sunLon], {
            radius: 10000000,
            color: '#f39c12',
            fillColor: 'rgba(243, 156, 18, 0.1)',
            fillOpacity: 0.1,
            weight: 2,
            dashArray: '5, 5'
        }).addTo(map);
        greylineCircle.bindTooltip('Greyline (Day/Night Terminator)', { permanent: false });

        // Interactive controls
        document.querySelectorAll('input[name="band"]').forEach(radio => {
            radio.addEventListener('change', function() {
                console.log('Band changed to:', this.value);
                // In real implementation, this would update the map data
            });
        });

        document.querySelectorAll('input[name="mode"]').forEach(radio => {
            radio.addEventListener('change', function() {
                console.log('Mode changed to:', this.value);
                // In real implementation, this would recalculate regions based on SNR thresholds
            });
        });

        document.querySelectorAll('input[name="time"]').forEach(radio => {
            radio.addEventListener('change', function() {
                console.log('Time changed to:', this.value);
                // In real implementation, this would show future propagation
            });
        });

        document.querySelectorAll('input[name="layer"]').forEach(radio => {
            radio.addEventListener('change', function() {
                console.log('Layer changed to:', this.value);
                // In real implementation, this would change color coding (signal/reliability/SNR)
            });
        });
    </script>
</body>
</html>
